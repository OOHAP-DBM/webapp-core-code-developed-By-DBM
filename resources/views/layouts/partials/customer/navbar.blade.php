{{-- Customer Navbar --}}
<header class="bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6">

    {{-- SEARCH BAR (Desktop & Tablet only) --}}
    <div class="flex-1 hidden md:flex md:justify-center" >
        <form id="navbar-search-form"
            action="{{ route('search') }}"
            method="GET"
            class="flex items-center w-full max-w-3xl lg:max-w-4xl bg-gray-100 rounded-lg overflow-hidden ml-6">
            {{-- Location --}}
            <div class="flex items-center px-3 flex-1">
                <input
                    type="text"
                    name="location"
                    placeholder="Search by city, locality..."
                    class="w-full bg-transparent text-sm focus:outline-none"
                >
            </div>

            {{-- Near Me --}}
            <button type="button"
                    id="near-me-btn"
                    class="flex items-center px-3 py-2 bg-gray-200 text-sm text-gray-700 hover:bg-gray-300">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M11.4969 21.4508V19.9898C9.41354 19.7944 7.69354 19.0184 6.33688 17.6618C4.97954 16.3044 4.20354 14.5841 4.00888 12.5008H2.54688V11.5008H4.00888C4.20354 9.41745 4.97954 7.69745 6.33688 6.34078C7.69421 4.98411 9.41421 4.20811 11.4969 4.01278V2.55078H12.4969V4.01278C14.5802 4.20745 16.3002 4.98345 17.6569 6.34078C19.0135 7.69811 19.7899 9.41811 19.9859 11.5008H21.4469V12.5008H19.9859C19.7905 14.5841 19.0145 16.3041 17.6579 17.6608C16.3005 19.0181 14.5802 19.7944 12.4969 19.9898V21.4508H11.4969ZM11.9969 19.0008C13.9302 19.0008 15.5802 18.3174 16.9469 16.9508C18.3135 15.5841 18.9969 13.9341 18.9969 12.0008C18.9969 10.0674 18.3135 8.41745 16.9469 7.05078C15.5802 5.68411 13.9302 5.00078 11.9969 5.00078C10.0635 5.00078 8.41354 5.68411 7.04688 7.05078C5.68021 8.41745 4.99688 10.0674 4.99688 12.0008C4.99688 13.9341 5.68021 15.5841 7.04688 16.9508C8.41354 18.3174 10.0635 19.0008 11.9969 19.0008ZM11.9969 15.0008C11.1722 15.0008 10.4659 14.7071 9.87787 14.1198C9.28987 13.5324 8.99621 12.8261 8.99687 12.0008C8.99754 11.1754 9.29121 10.4691 9.87787 9.88178C10.4645 9.29445 11.1709 9.00078 11.9969 9.00078C12.8229 9.00078 13.5292 9.29445 14.1159 9.88178C14.7025 10.4691 14.9962 11.1754 14.9969 12.0008C14.9975 12.8261 14.7039 13.5324 14.1159 14.1198C13.5279 14.7071 12.8215 15.0008 11.9969 15.0008ZM11.9969 14.0008C12.5469 14.0008 13.0179 13.8051 13.4099 13.4138C13.8019 13.0224 13.9975 12.5514 13.9969 12.0008C13.9962 11.4501 13.8005 10.9794 13.4099 10.5888C13.0192 10.1981 12.5482 10.0021 11.9969 10.0008C11.4455 9.99945 10.9749 10.1954 10.5849 10.5888C10.1949 10.9821 9.99887 11.4528 9.99687 12.0008C9.99487 12.5488 10.1909 13.0198 10.5849 13.4138C10.9789 13.8078 11.4495 14.0034 11.9969 14.0008Z" fill="black"/>
                </svg>
                Near me
            </button>

            {{-- Date Range --}}
            <div class="flex items-center px-3 bg-gray-100 border-l border-gray-300 gap-3">
                <svg width="25" height="24" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12.2893 14C12.5323 14 12.7699 13.9316 12.972 13.8034C13.1741 13.6752 13.3317 13.493 13.4247 13.2798C13.5177 13.0666 13.542 12.832 13.4946 12.6057C13.4472 12.3794 13.3301 12.1715 13.1583 12.0084C12.9864 11.8452 12.7674 11.7341 12.529 11.6891C12.2906 11.6441 12.0436 11.6672 11.819 11.7555C11.5944 11.8438 11.4025 11.9933 11.2675 12.1852C11.1324 12.377 11.0604 12.6026 11.0604 12.8333C11.0604 13.1428 11.1898 13.4395 11.4203 13.6583C11.6508 13.8771 11.9634 14 12.2893 14ZM18.4339 14C18.677 14 18.9146 13.9316 19.1167 13.8034C19.3188 13.6752 19.4763 13.493 19.5693 13.2798C19.6623 13.0666 19.6867 12.832 19.6392 12.6057C19.5918 12.3794 19.4748 12.1715 19.3029 12.0084C19.131 11.8452 18.9121 11.7341 18.6737 11.6891C18.4353 11.6441 18.1882 11.6672 17.9636 11.7555C17.7391 11.8438 17.5471 11.9933 17.4121 12.1852C17.2771 12.377 17.205 12.6026 17.205 12.8333C17.205 13.1428 17.3345 13.4395 17.5649 13.6583C17.7954 13.8771 18.108 14 18.4339 14ZM12.2893 18.6667C12.5323 18.6667 12.7699 18.5982 12.972 18.4701C13.1741 18.3419 13.3317 18.1596 13.4247 17.9465C13.5177 17.7333 13.542 17.4987 13.4946 17.2724C13.4472 17.0461 13.3301 16.8382 13.1583 16.675C12.9864 16.5119 12.7674 16.4008 12.529 16.3558C12.2906 16.3107 12.0436 16.3338 11.819 16.4221C11.5944 16.5104 11.4025 16.66 11.2675 16.8518C11.1324 17.0437 11.0604 17.2693 11.0604 17.5C11.0604 17.8094 11.1898 18.1062 11.4203 18.325C11.6508 18.5438 11.9634 18.6667 12.2893 18.6667ZM18.4339 18.6667C18.677 18.6667 18.9146 18.5982 19.1167 18.4701C19.3188 18.3419 19.4763 18.1596 19.5693 17.9465C19.6623 17.7333 19.6867 17.4987 19.6392 17.2724C19.5918 17.0461 19.4748 16.8382 19.3029 16.675C19.131 16.5119 18.9121 16.4008 18.6737 16.3558C18.4353 16.3107 18.1882 16.3338 17.9636 16.4221C17.7391 16.5104 17.5471 16.66 17.4121 16.8518C17.2771 17.0437 17.205 17.2693 17.205 17.5C17.205 17.8094 17.3345 18.1062 17.5649 18.325C17.7954 18.5438 18.108 18.6667 18.4339 18.6667ZM6.14464 14C6.3877 14 6.6253 13.9316 6.8274 13.8034C7.02949 13.6752 7.18701 13.493 7.28002 13.2798C7.37304 13.0666 7.39738 12.832 7.34996 12.6057C7.30254 12.3794 7.18549 12.1715 7.01363 12.0084C6.84176 11.8452 6.62278 11.7341 6.38439 11.6891C6.14601 11.6441 5.89891 11.6672 5.67435 11.7555C5.44979 11.8438 5.25786 11.9933 5.12283 12.1852C4.98779 12.377 4.91571 12.6026 4.91571 12.8333C4.91571 13.1428 5.04519 13.4395 5.27566 13.6583C5.50613 13.8771 5.81871 14 6.14464 14ZM20.8918 2.33333H19.6629V1.16667C19.6629 0.857247 19.5334 0.560501 19.3029 0.341709C19.0724 0.122916 18.7599 0 18.4339 0C18.108 0 17.7954 0.122916 17.5649 0.341709C17.3345 0.560501 17.205 0.857247 17.205 1.16667V2.33333H7.37357V1.16667C7.37357 0.857247 7.24409 0.560501 7.01363 0.341709C6.78316 0.122916 6.47057 0 6.14464 0C5.81871 0 5.50613 0.122916 5.27566 0.341709C5.04519 0.560501 4.91571 0.857247 4.91571 1.16667V2.33333H3.68679C2.70899 2.33333 1.77124 2.70208 1.07983 3.35846C0.388428 4.01484 0 4.90508 0 5.83333V19.8333C0 20.7616 0.388428 21.6518 1.07983 22.3082C1.77124 22.9646 2.70899 23.3333 3.68679 23.3333H20.8918C21.8696 23.3333 22.8073 22.9646 23.4987 22.3082C24.1901 21.6518 24.5786 20.7616 24.5786 19.8333V5.83333C24.5786 4.90508 24.1901 4.01484 23.4987 3.35846C22.8073 2.70208 21.8696 2.33333 20.8918 2.33333ZM22.1207 19.8333C22.1207 20.1428 21.9912 20.4395 21.7608 20.6583C21.5303 20.8771 21.2177 21 20.8918 21H3.68679C3.36085 21 3.04827 20.8771 2.8178 20.6583C2.58733 20.4395 2.45786 20.1428 2.45786 19.8333V9.33333H22.1207V19.8333ZM22.1207 7H2.45786V5.83333C2.45786 5.52391 2.58733 5.22717 2.8178 5.00838C3.04827 4.78958 3.36085 4.66667 3.68679 4.66667H20.8918C21.2177 4.66667 21.5303 4.78958 21.7608 5.00838C21.9912 5.22717 22.1207 5.52391 22.1207 5.83333V7ZM6.14464 18.6667C6.3877 18.6667 6.6253 18.5982 6.8274 18.4701C7.02949 18.3419 7.18701 18.1596 7.28002 17.9465C7.37304 17.7333 7.39738 17.4987 7.34996 17.2724C7.30254 17.0461 7.18549 16.8382 7.01363 16.675C6.84176 16.5119 6.62278 16.4008 6.38439 16.3558C6.14601 16.3107 5.89891 16.3338 5.67435 16.4221C5.44979 16.5104 5.25786 16.66 5.12283 16.8518C4.98779 17.0437 4.91571 17.2693 4.91571 17.5C4.91571 17.8094 5.04519 18.1062 5.27566 18.325C5.50613 18.5438 5.81871 18.6667 6.14464 18.6667Z" fill="#949291"/>
                </svg>
                <input type="date" name="from_date"
                       class="bg-transparent text-sm focus:outline-none" >
            </div>

            {{-- Search --}}
            <button type="submit"
                    class="px-5 py-2 bg-blue-600 text-white text-sm font-semibold hover:bg-blue-700">
                Search
            </button>
        </form>
    </div>

    {{-- RIGHT SIDE ACTIONS --}}
    <div class="flex items-center space-x-2">

        {{-- Notification Dropdown --}}
        <div x-data="{ open: false, unreadCount: {{ auth()->user()->unreadNotifications->count() ?? 0 }} }" class="relative hidden md:block">
            <button @click="open = !open" type="button" class="relative p-2 text-gray-400 hover:text-gray-600 rounded-full hover:bg-gray-100">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"></path>
                </svg>
                <span x-show="unreadCount > 0" class="absolute top-1.5 right-1.5 block h-2 w-2 rounded-full bg-red-500"></span>
            </button>

            <div x-show="open" 
                 @click.away="open = false"
                 x-transition
                 class="absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-xl border border-gray-200 z-50"
                 style="display: none;">
                <div class="px-4 py-3 border-b border-gray-200">
                    <h3 class="text-sm font-semibold text-gray-900">Notifications</h3>
                </div>
                <div class="max-h-96 overflow-y-auto">
                    @forelse(auth()->user()->notifications->take(5) as $notification)
                        <a href="{{ $notification->data['action_url'] ?? '#' }}" 
                           class="block px-4 py-3 border-b border-gray-100 hover:bg-gray-50 {{ $notification->read_at ? 'bg-white' : 'bg-blue-50' }}">
                            <p class="text-sm text-gray-900">{{ $notification->data['title'] ?? 'New Notification' }}</p>
                            <p class="text-xs text-gray-600 mt-1">{{ $notification->data['message'] ?? '' }}</p>
                            <p class="text-xs text-gray-500 mt-1">{{ $notification->created_at->diffForHumans() }}</p>
                        </a>
                    @empty
                        <div class="px-4 py-8 text-center text-gray-500">
                            <p class="text-sm">No notifications yet</p>
                        </div>
                    @endforelse
                </div>
                <div class="px-4 py-3 border-t border-gray-200 text-center">
                    <a href="{{ route('customer.notifications.index') }}" class="text-sm text-blue-600 hover:text-blue-800 font-medium">
                        View all notifications
                    </a>
                </div>
            </div>
        </div>

      {{-- Mobile Search --}}
        <form action="{{ route('search') }}"
            method="GET"
            class="flex md:hidden items-center max-w-[55%] px-2 gap-1">

            <input
                type="text"
                name="location"
                placeholder="Search by city..."
                class="flex-1 px-2 py-2 text-sm border border-gray-300 rounded-md focus:outline-none"
            >

            <button type="submit"
                    class=" rounded-md text-gray-600">
                <svg width="42" height="42" viewBox="0 0 42 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="42" height="42" rx="21" fill="#F0F0F0"/>
                <path d="M20 28C24.4183 28 28 24.4183 28 20C28 15.5817 24.4183 12 20 12C15.5817 12 12 15.5817 12 20C12 24.4183 15.5817 28 20 28Z" stroke="#939393" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M29.9984 29.9984L25.6484 25.6484" stroke="#939393" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </button>
        </form>

        {{-- User Icon --}}
        <div class="relative" id="user">
            <button type="button" class="flex items-center focus:outline-none">
                <svg width="30" height="30" viewBox="0 0 30 30" fill="none">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                          d="M10 8.75C10 7.42392 10.5268 6.15215 11.4645 5.21447C12.4021 4.27678 13.6739 3.75 15 3.75C16.3261 3.75 17.5979 4.27678 18.5355 5.21447C19.4732 6.15215 20 7.42392 20 8.75C20 10.0761 19.4732 11.3479 18.5355 12.2855C17.5979 13.2232 16.3261 13.75 15 13.75C13.6739 13.75 12.4021 13.2232 11.4645 12.2855C10.5268 11.3479 10 10.0761 10 8.75ZM10 16.25C8.3424 16.25 6.75269 16.9085 5.58058 18.0806C4.40848 19.2527 3.75 20.8424 3.75 22.5C3.75 23.4946 4.14509 24.4484 4.84835 25.1517C5.55161 25.8549 6.50544 26.25 7.5 26.25H22.5C23.4946 26.25 24.4484 25.8549 25.1517 25.1517C25.8549 24.4484 26.25 23.4946 26.25 22.5C26.25 20.8424 25.5915 19.2527 24.4194 18.0806C23.2473 16.9085 21.6576 16.25 20 16.25H10Z"
                          fill="#333"/>
                </svg>
            </button>
        </div>

        {{-- Shortlist --}}
        <a href="{{ route('customer.shortlist') }}"
           class="relative p-2 rounded-full hover:bg-gray-100" id="d-none">
            <svg width="29" height="29" viewBox="0 0 29 29" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M7.25 7.49167C7.25 6.13833 7.25 5.46167 7.51342 4.9445C7.74511 4.4898 8.1148 4.12011 8.5695 3.88842C9.08667 3.625 9.76333 3.625 11.1167 3.625H17.8833C19.2367 3.625 19.9133 3.625 20.4305 3.88842C20.8852 4.12011 21.2549 4.4898 21.4866 4.9445C21.75 5.46167 21.75 6.13833 21.75 7.49167V23.5685C21.75 24.1558 21.75 24.4494 21.628 24.6101C21.5752 24.68 21.5079 24.7376 21.4307 24.7789C21.3535 24.8202 21.2683 24.8443 21.1809 24.8494C20.9791 24.8615 20.735 24.6983 20.2468 24.3733L14.5 20.5417L8.75317 24.3721C8.265 24.6983 8.02092 24.8615 7.81792 24.8494C7.73072 24.8441 7.6457 24.82 7.56873 24.7787C7.49175 24.7374 7.42465 24.6799 7.37204 24.6101C7.25 24.4494 7.25 24.1558 7.25 23.5685V7.49167Z" fill="#333333" stroke="#333333" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            <path opacity="0.5" d="M7.25 7.49167C7.25 6.13833 7.25 5.46167 7.51342 4.9445C7.74511 4.4898 8.1148 4.12011 8.5695 3.88842C9.08667 3.625 9.76333 3.625 11.1167 3.625H17.8833C19.2367 3.625 19.9133 3.625 20.4305 3.88842C20.8852 4.12011 21.2549 4.4898 21.4866 4.9445C21.75 5.46167 21.75 6.13833 21.75 7.49167V23.5685C21.75 24.1558 21.75 24.4494 21.628 24.6101C21.5752 24.68 21.5079 24.7376 21.4307 24.7789C21.3535 24.8202 21.2683 24.8443 21.1809 24.8494C20.9791 24.8615 20.735 24.6983 20.2468 24.3733L14.5 20.5417L8.75317 24.3721C8.265 24.6983 8.02092 24.8615 7.81792 24.8494C7.73072 24.8441 7.6457 24.82 7.56873 24.7787C7.49175 24.7374 7.42465 24.6799 7.37204 24.6101C7.25 24.4494 7.25 24.1558 7.25 23.5685V7.49167Z" fill="#333333"/>
            </svg>
        </a>

        {{-- Cart --}}
        <a href=""
           class="relative p-2 rounded-full hover:bg-gray-100" id="cart">
            <svg width="28" height="24" viewBox="0 0 28 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M0 0.8795C0 1.3595 0.3985 1.77 0.8675 1.77H4.828L6.703 14.637C6.9495 16.301 7.828 17.344 9.5275 17.344H23.2035C23.66 17.344 24.0585 16.969 24.0585 16.4655C24.0585 15.9615 23.66 15.5865 23.2035 15.5865H9.7265C9.0585 15.5865 8.6485 15.1175 8.543 14.403L8.3555 13.1725H23.2265C24.9375 13.1725 25.8165 12.1175 26.0625 10.442L27 4.2425C27.0251 4.09532 27.0408 3.94668 27.047 3.7975C27.047 3.235 26.625 2.848 25.9805 2.848H6.8555L6.621 1.36C6.504 0.4575 6.176 0 4.981 0H0.867C0.3985 0 0 0.4105 0 0.8795ZM8.5435 21.141C8.5435 22.2075 9.3875 23.0395 10.4535 23.0395C10.7034 23.0416 10.9512 22.9939 11.1825 22.8992C11.4137 22.8045 11.6238 22.6648 11.8005 22.488C11.9773 22.3113 12.117 22.1012 12.2117 21.87C12.3064 21.6387 12.3541 21.3909 12.352 21.141C12.3531 20.8914 12.3048 20.644 12.2098 20.4131C12.1148 20.1823 11.975 19.9726 11.7985 19.796C11.6219 19.6195 11.4122 19.4797 11.1814 19.3847C10.9505 19.2897 10.7031 19.2414 10.4535 19.2425C9.3875 19.2425 8.5435 20.0865 8.5435 21.141ZM19.5005 21.141C19.5005 22.2075 20.356 23.0395 21.4105 23.0395C22.477 23.0395 23.3205 22.2075 23.3205 21.141C23.3205 20.086 22.477 19.2425 21.4105 19.2425C20.356 19.2425 19.5005 20.0865 19.5005 21.141Z" fill="#333333"/>
            </svg>
        </a>

        {{-- Mobile Menu --}}
        <button id="mobile-menu-btn"
                class="block md:hidden p-2 text-gray-600 hover:bg-gray-100 rounded-md">
            â˜°
        </button>

    </div>
</header>
