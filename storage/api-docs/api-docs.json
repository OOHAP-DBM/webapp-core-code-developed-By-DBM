{
    "openapi": "3.0.0",
    "info": {
        "title": "OOHApp API",
        "description": "Authentication & Platform APIs for OOHApp",
        "contact": {
            "email": "admin@example.com"
        },
        "version": "1.0.0"
    },
    "servers": [
        {
            "url": "/api/v1",
            "description": "API v1"
        },
        {
            "url": "docs"
        }
    ],
    "paths": {
        "/auth/register/otp/send": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Send OTP for registration",
                "operationId": "841495db0199ddcb474b45c6d35cc9e4",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier"
                                ],
                                "properties": {
                                    "identifier": {
                                        "type": "string",
                                        "example": "test@email.com"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP sent for registration"
                    }
                }
            }
        },
        "/auth/register/otp/verify": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Verify OTP before registration",
                "operationId": "8f57ef577d8a39098348bdac26ed7f7a",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier",
                                    "otp"
                                ],
                                "properties": {
                                    "identifier": {
                                        "type": "string",
                                        "example": "test@email.com"
                                    },
                                    "otp": {
                                        "type": "string",
                                        "example": "1234"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP verified"
                    }
                }
            }
        },
        "/auth/register": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Complete registration after OTP verification",
                "description": "Registers user after OTP verification and issues access token",
                "operationId": "04c4b0e4cb6b695c2b1f1f23c78aa19f",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "email",
                                    "name",
                                    "password",
                                    "password_confirmation"
                                ],
                                "properties": {
                                    "email": {
                                        "description": "User email address or phone number used during OTP verification",
                                        "type": "string",
                                        "example": "test@email.com"
                                    },
                                    "name": {
                                        "type": "string",
                                        "example": "John Doe"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "Password@123"
                                    },
                                    "password_confirmation": {
                                        "type": "string",
                                        "example": "Password@123"
                                    },
                                    "role": {
                                        "description": "Allowed values: customer, vendor. Default is customer",
                                        "type": "string",
                                        "enum": [
                                            "customer",
                                            "vendor"
                                        ],
                                        "example": "customer"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Registration successful"
                    },
                    "403": {
                        "description": "OTP not verified"
                    },
                    "404": {
                        "description": "User not found"
                    }
                }
            }
        },
        "/auth/login": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Login with email/phone and password",
                "operationId": "7d76bf62679c67cff7644d1138e8cb9a",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier",
                                    "password"
                                ],
                                "properties": {
                                    "identifier": {
                                        "type": "string",
                                        "example": "test@email.com"
                                    },
                                    "password": {
                                        "type": "string",
                                        "example": "password123"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Login successful"
                    },
                    "401": {
                        "description": "Invalid credentials"
                    }
                }
            }
        },
        "/auth/otp/send": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Send OTP for login",
                "operationId": "4b7dcdc3c8132972ace00c9b9a165cd4",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier"
                                ],
                                "properties": {
                                    "identifier": {
                                        "type": "string",
                                        "example": "+919999999999"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP sent successfully"
                    }
                }
            }
        },
        "/auth/otp/verify": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Verify OTP and login",
                "operationId": "177ce6707bc89f0143824e045b754c46",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier",
                                    "otp"
                                ],
                                "properties": {
                                    "identifier": {
                                        "type": "string",
                                        "example": "+919999999999"
                                    },
                                    "otp": {
                                        "type": "string",
                                        "example": "1234"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP verified successfully"
                    }
                }
            }
        },
        "/auth/me": {
            "get": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Get authenticated user profile",
                "operationId": "c34c5f481db7348779ab282eda3d7b7b",
                "responses": {
                    "200": {
                        "description": "User profile"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/auth/logout": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Logout user and revoke token",
                "operationId": "751905b55120e5068637c37b03b5e52d",
                "responses": {
                    "200": {
                        "description": "Logged out successfully"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/auth/refresh": {
            "post": {
                "tags": [
                    "Authentication"
                ],
                "summary": "Refresh API token",
                "operationId": "1e2091a6658de94cf8cba4dbea1b725b",
                "responses": {
                    "200": {
                        "description": "Token refreshed"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/auth/vendor/onboarding/send-otp": {
            "post": {
                "tags": [
                    "Vendor Onboarding"
                ],
                "summary": "Send OTP to vendor phone/email",
                "description": "Generates and sends a 4-digit OTP to the provided identifier (phone or email).",
                "operationId": "c9c8c426845b3ff0eec5f1f62f2e4153",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier"
                                ],
                                "properties": {
                                    "identifier": {
                                        "description": "Phone number or Email address",
                                        "type": "string",
                                        "example": "9876543210"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "OTP sent successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "OTP sent successfully"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/auth/vendor/onboarding/verify-otp": {
            "post": {
                "tags": [
                    "Vendor Onboarding"
                ],
                "summary": "Verify vendor contact OTP",
                "description": "Verifies the OTP and upgrades the vendor to Onboarding Step 2.",
                "operationId": "5500af408cd57439de4e77f84185a2ba",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "required": [
                                    "identifier",
                                    "otp"
                                ],
                                "properties": {
                                    "identifier": {
                                        "type": "string",
                                        "example": "9876543210"
                                    },
                                    "otp": {
                                        "type": "string",
                                        "example": "123456"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Verification successful",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Verification successful"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Invalid OTP or expired"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/auth/vendor/onboarding/skip-contact": {
            "post": {
                "tags": [
                    "Vendor Onboarding"
                ],
                "summary": "Skip Contact verification",
                "operationId": "4910725d0a0c5b9d2413824c296fbb9b",
                "responses": {
                    "200": {
                        "description": "Contact verification skipped"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/auth/vendor/onboarding/business-info": {
            "post": {
                "tags": [
                    "Vendor Onboarding"
                ],
                "summary": "Submit vendor business & KYC information",
                "operationId": "2bedaccfa837b7f850cb2c332ef6f62b",
                "requestBody": {
                    "required": true,
                    "content": {
                        "multipart/form-data": {
                            "schema": {
                                "properties": {
                                    "gstin": {
                                        "type": "string",
                                        "example": "22AAAAA0000A1Z5"
                                    },
                                    "business_type": {
                                        "type": "string",
                                        "example": "Proprietorship"
                                    },
                                    "business_name": {
                                        "type": "string",
                                        "example": "OOH Media Pvt Ltd"
                                    },
                                    "registered_address": {
                                        "type": "string",
                                        "example": "123 Main Street"
                                    },
                                    "city": {
                                        "type": "string",
                                        "example": "Delhi"
                                    },
                                    "state": {
                                        "type": "string",
                                        "example": "Delhi"
                                    },
                                    "pincode": {
                                        "type": "string",
                                        "example": "110001"
                                    },
                                    "bank_name": {
                                        "type": "string",
                                        "example": "State Bank of India"
                                    },
                                    "account_number": {
                                        "type": "string",
                                        "example": "1234567890"
                                    },
                                    "ifsc_code": {
                                        "type": "string",
                                        "example": "SBIN0001234"
                                    },
                                    "account_holder_name": {
                                        "type": "string",
                                        "example": "John Doe"
                                    },
                                    "pan_number": {
                                        "type": "string",
                                        "example": "ABCDE1234F"
                                    },
                                    "pan_card_document": {
                                        "type": "string",
                                        "format": "binary"
                                    }
                                },
                                "type": "object"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Business info submitted"
                    },
                    "403": {
                        "description": "Contact verification required"
                    },
                    "422": {
                        "description": "Validation error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/auth/vendor/onboarding/skip-business-info": {
            "post": {
                "tags": [
                    "Vendor Onboarding"
                ],
                "summary": "Skip business info/KYC step",
                "description": "Allows the vendor to skip the business information step. Sets onboarding_step to 3 and status to 'pending_approval'.",
                "operationId": "fb30aaa252350fa2d7c1381fd32eee68",
                "responses": {
                    "200": {
                        "description": "Business info skipped successfully",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Business info skipped"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthenticated - Token missing or invalid"
                    },
                    "404": {
                        "description": "Vendor profile not found",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "message": {
                                            "type": "string",
                                            "example": "Vendor profile not found"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/hoardings/vendor/ooh/step-1": {
            "post": {
                "tags": [
                    "OOH Hoardings"
                ],
                "summary": "Create OOH Hoarding - Step 1",
                "operationId": "eda97faed1eae55675b84fe7d458b233",
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/OOHStep1Request"
                            }
                        }
                    }
                },
                "responses": {
                    "201": {
                        "description": "Created",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/hoardings/vendor/ooh/step-2/{ooh_id}": {
            "post": {
                "tags": [
                    "OOH Hoardings"
                ],
                "summary": "Update OOH Hoarding - Step 2",
                "operationId": "ee926df87d87b3570c8e951f6eac9fd3",
                "parameters": [
                    {
                        "name": "ooh_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/OOHStep2Request"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/hoardings/vendor/ooh/step-3/{ooh_id}": {
            "post": {
                "tags": [
                    "OOH Hoardings"
                ],
                "summary": "Update OOH Hoarding - Step 3",
                "operationId": "0effd52d563c58c5772d68803eae37e8",
                "parameters": [
                    {
                        "name": "ooh_id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "requestBody": {
                    "required": true,
                    "content": {
                        "application/json": {
                            "schema": {
                                "$ref": "#/components/schemas/OOHStep3Request"
                            }
                        }
                    }
                },
                "responses": {
                    "200": {
                        "description": "Updated",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "422": {
                        "description": "Validation Error"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/hoardings/vendor/ooh/draft": {
            "get": {
                "tags": [
                    "OOH Hoardings"
                ],
                "summary": "Get vendor's draft hoardings",
                "operationId": "8092488e1157f7837593cafc06a57667",
                "responses": {
                    "200": {
                        "description": "Drafts",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "array",
                                            "items": {
                                                "type": "object"
                                            }
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        },
        "/hoardings/vendor/ooh/{id}": {
            "get": {
                "tags": [
                    "OOH Hoardings"
                ],
                "summary": "Get OOH Hoarding details",
                "operationId": "08c6f036be99229e2debf71d068d08c1",
                "parameters": [
                    {
                        "name": "id",
                        "in": "path",
                        "required": true,
                        "schema": {
                            "type": "integer"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "Details",
                        "content": {
                            "application/json": {
                                "schema": {
                                    "properties": {
                                        "success": {
                                            "type": "boolean"
                                        },
                                        "message": {
                                            "type": "string"
                                        },
                                        "data": {
                                            "type": "object"
                                        }
                                    },
                                    "type": "object"
                                }
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found"
                    }
                },
                "security": [
                    {
                        "sanctum": []
                    }
                ]
            }
        }
    },
    "components": {
        "schemas": {
            "OOHStep1Request": {
                "required": [
                    "category",
                    "width",
                    "height",
                    "measurement_unit",
                    "address",
                    "pincode",
                    "locality",
                    "state",
                    "base_monthly_price",
                    "lat",
                    "lng"
                ],
                "properties": {
                    "category": {
                        "type": "string",
                        "example": "Billboard"
                    },
                    "width": {
                        "type": "number",
                        "format": "float",
                        "example": 40
                    },
                    "height": {
                        "type": "number",
                        "format": "float",
                        "example": 20
                    },
                    "measurement_unit": {
                        "type": "string",
                        "enum": [
                            "sqft",
                            "sqm"
                        ],
                        "example": "sqft"
                    },
                    "address": {
                        "type": "string",
                        "example": "MG Road, Near Metro Station"
                    },
                    "pincode": {
                        "type": "string",
                        "example": "560001"
                    },
                    "locality": {
                        "type": "string",
                        "example": "MG Road"
                    },
                    "city": {
                        "type": "string",
                        "example": "Bengaluru",
                        "nullable": true
                    },
                    "state": {
                        "type": "string",
                        "example": "Karnataka"
                    },
                    "lat": {
                        "type": "number",
                        "format": "float",
                        "example": 12.9716,
                        "nullable": true
                    },
                    "lng": {
                        "type": "number",
                        "format": "float",
                        "example": 77.5946,
                        "nullable": true
                    },
                    "base_monthly_price": {
                        "type": "number",
                        "format": "float",
                        "example": 250000,
                        "nullable": true
                    },
                    "monthly_price": {
                        "type": "number",
                        "format": "float",
                        "example": 24000,
                        "nullable": true
                    },
                    "media": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "binary"
                        }
                    }
                },
                "type": "object"
            },
            "OOHStep2Request": {
                "properties": {
                    "nagar_nigam_approved": {
                        "type": "boolean",
                        "example": true
                    },
                    "permit_number": {
                        "type": "string",
                        "example": "NGM-2024-4567",
                        "nullable": true
                    },
                    "permit_valid_till": {
                        "type": "string",
                        "format": "date",
                        "example": "2026-12-31",
                        "nullable": true
                    },
                    "expected_footfall": {
                        "type": "integer",
                        "example": 50000
                    },
                    "expected_eyeball": {
                        "type": "integer",
                        "example": 150000
                    },
                    "audience_types": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "daily commuters",
                            "office crowd"
                        ]
                    },
                    "blocked_dates_json": {
                        "type": "string",
                        "example": [
                            "2026-01-10",
                            "2026-01-15"
                        ],
                        "nullable": true
                    },
                    "needs_grace_period": {
                        "type": "boolean",
                        "example": true
                    },
                    "grace_period_days": {
                        "type": "integer",
                        "example": 7
                    },
                    "visibility_type": {
                        "type": "string",
                        "example": "one_way"
                    },
                    "visibility_start": {
                        "type": "string",
                        "example": "GT Road",
                        "nullable": true
                    },
                    "visibility_end": {
                        "type": "string",
                        "example": "Central Mall",
                        "nullable": true
                    },
                    "facing_direction": {
                        "type": "string",
                        "example": "north"
                    },
                    "road_type": {
                        "type": "string",
                        "example": "highway"
                    },
                    "traffic_type": {
                        "type": "string",
                        "example": "vehicular"
                    },
                    "visible_from": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "metro station",
                            "signal"
                        ]
                    },
                    "located_at": {
                        "type": "array",
                        "items": {
                            "type": "string"
                        },
                        "example": [
                            "road divider",
                            "junction"
                        ]
                    },
                    "brand_logos": {
                        "type": "array",
                        "items": {
                            "type": "string",
                            "format": "binary"
                        }
                    }
                },
                "type": "object"
            },
            "OOHStep3Request": {
                "required": [
                    "offers_json"
                ],
                "properties": {
                    "offers_json": {
                        "description": "JSON-encoded array of campaign packages. Each package object should have: name, min_booking_duration, duration_unit, discount, end_date, services.",
                        "type": "string",
                        "example": "[{name: 'Annual Bulk', min_booking_duration: 12, duration_unit: 'months', discount: 10, end_date: '2026-12-31', services: ['printing','mounting']}]"
                    },
                    "enable_weekly_booking": {
                        "type": "boolean",
                        "example": true
                    },
                    "weekly_price_1": {
                        "type": "number",
                        "format": "float",
                        "example": 345
                    },
                    "weekly_price_2": {
                        "type": "number",
                        "format": "float",
                        "example": 543
                    },
                    "weekly_price_3": {
                        "type": "number",
                        "format": "float",
                        "example": 45
                    },
                    "graphics_included": {
                        "type": "boolean",
                        "example": false
                    },
                    "graphics_charge": {
                        "type": "number",
                        "format": "float",
                        "example": 354
                    },
                    "printing_included": {
                        "type": "boolean",
                        "example": false
                    },
                    "printing_charge": {
                        "type": "number",
                        "format": "float",
                        "example": 5435
                    },
                    "printing_material_type": {
                        "type": "string",
                        "example": "flex"
                    },
                    "mounting_included": {
                        "type": "boolean",
                        "example": false
                    },
                    "mounting_charge": {
                        "type": "number",
                        "format": "float",
                        "example": 34
                    },
                    "lighting_included": {
                        "type": "boolean",
                        "example": false
                    },
                    "lighting_charge": {
                        "type": "number",
                        "format": "float",
                        "example": 43
                    },
                    "lighting_type": {
                        "type": "string",
                        "example": "front-lit"
                    },
                    "remounting_charge": {
                        "type": "number",
                        "format": "float",
                        "example": 345
                    },
                    "survey_charge": {
                        "type": "number",
                        "format": "float",
                        "example": 34
                    }
                },
                "type": "object"
            }
        },
        "parameters": {
            "App\\Swagger\\OpenApi": {
                "$ref": "#/components/parameters/AcceptHeader"
            },
            "AcceptHeader": {
                "name": "Accept",
                "in": "header",
                "description": "Accept header. Always set to application/json for API requests.",
                "required": true,
                "schema": {
                    "type": "string",
                    "default": "application/json"
                }
            }
        },
        "securitySchemes": {
            "sanctum": {
                "type": "http",
                "scheme": "bearer",
                "bearerFormat": "SANCTUM",
                "description": "Enter token as: Bearer {your-token}"
            }
        }
    },
    "tags": [
        {
            "name": "Authentication",
            "description": "Authentication"
        },
        {
            "name": "Vendor Onboarding",
            "description": "Vendor Onboarding"
        },
        {
            "name": "OOH Hoardings",
            "description": "OOH Hoardings"
        }
    ]
}